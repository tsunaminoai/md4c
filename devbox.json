{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.10.7/.schema/devbox.schema.json",
  "packages": [
    "zig@0.13.0",
    "zls@latest",
    "cmake@latest",
    "gcc@latest",
    "gnumake@latest",
    "watchexec@latest",
    "python@latest"
  ],
  "shell": {
    "init_hook": [
      "echo 'Welcome to devbox!' > /dev/null"
    ],
    "scripts": {
      "build-cmake": [
        "mkdir build",
        "pushd build",
        "cmake ..",
        "make",
        "popd"
      ],
      "clean": [
        "rm -rf build .zig-cache zig-out"
      ],
      "build": [
        "zig build --release=safe"
      ],
      "build-md2html": [
        "zig build --release=safe md2html"
      ],
      "test-cmake": [
        "#!/usr/bin/env bash",
        ". $VENV_DIR/bin/activate",
        "pushd build",
        "time python ../scripts/run-tests.py",
        "popd"
      ],
      "test": [
        "#!/usr/bin/env bash",
        ". $VENV_DIR/bin/activate",
        "pushd zig-out/bin",
        "time python ../../scripts/run-tests.py",
        "popd"
      ],
      "build-dev": [
        "watchexec --watch . --exts c,zig,h,txt,in 'clear && zig build'"
      ],
      "comparison": [
        "devbox run clean",
        "devbox run build-cmake",
        "devbox run test",
        "devbox run clean",
        "devbox run build-md2html",
        "devbox run test"
      ]
    }
  }
}
